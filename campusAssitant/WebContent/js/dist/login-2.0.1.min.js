define(["jquery","common","util/validate"],function(s,t,e){var c=function(){var o=s("#zzu_user_tel").val(),r=s("#zzu_user_password").val(),a=s("#zzu_captcha").val();if(!e.isPhoneNumber(o)&&!e.isLetter(o))return s("#zzu_user_tel").val("").focus(),void s("#zzu_error").empty().html("手机号码格式不正确");if("true"!=e.isPas(r))return s("#zzu_user_password").val("").focus(),void s("#zzu_error").html(e.isPas(r));if(!e.isNotNull(a))return s("#zzu_captcha").focus(),s("#zzu_captcha_btn").trigger("click"),void s("#zzu_error").empty().html("图形验证码不能为空");s("#zzu_error").empty(),s(this).html("登录中……").unbind("click");var i={tel:o,pwd:r,captcha:a},n=function(e){if("1111"==e.code){var o=e.map;t.setItemSession("hfCode",o.hfCode),t.setItemSession("sessionId",o.sessionId),t.setItemSession("recommend",o.recommend),t.goUrl("accounts/account_index.html")}else s("#zzu_error").html(e.message),s("#zzu_user_password").val("").focus(),s("#zzu_captcha").val(""),s("#zzu_login_botton").html("立即登录").bind("click",c),s("#zzu_captcha_btn").trigger("click")};t.ajaxUtil("n/user/authen.json",i,"POST",n)};s("#zzu_login_botton").on("click",c),s("#zzu_captcha_btn,#zzu_captcha_img").on("click",function(){s("#zzu_captcha_img").attr("src","/i/n/images/captcha.jpg?"+Math.random())}).trigger("click"),s("body").on("keydown",function(t){"13"==t.keyCode&&s("#zzu_login_botton").trigger("click")})});