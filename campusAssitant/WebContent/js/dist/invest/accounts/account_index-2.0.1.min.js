define(["jquery","echars-common","common","util/validate","echarts","util/jquery.huifu","datepicker","datepickerCn","accountsPublic"],function(e,t,a,s,i,n,l){var r=new Date,_=function(){var t,i,n=e(this).attr("id");if(s.isNotNull(n))if(n.indexOf("table")>0){"zzu_begin_time_table"==n&&(t=e(this).val(),i=e("#zzu_end_time_table").val()),"zzu_end_time_table"==n&&(t=e("#zzu_begin_time_table").val(),i=e(this).val());var l=a.datePoor(t,i);if(0>l)return void a.showMessage("结束日期不能小于开始日期");if(2>l)return;if(l>11)return void a.showMessage("报表只能统计3-12个月的数据");e("#zzu_tabTwo").children(".active").removeClass("active"),w(e("#zzu_cash_withdrawal").val(),null,t,i)}else{"zzu_begin_time"==n&&(t=e(this).val(),i=e("#zzu_end_time").val()),"zzu_end_time"==n&&(t=e("#zzu_begin_time").val(),i=e(this).val());var l=a.datePoor(t,i);if(0>l)return void a.showMessage("结束日期不能小于开始日期！");if(2>l)return;if(l>11)return void a.showMessage("报表只能统计3-12个月的数据");e("#zzu_tabOne").children(".active").removeClass("active"),o(e("#zzu_invest_financ").val(),null,t,i)}};try{e(".zzu-date-control").datepicker({format:"yyyy-mm",autoclose:!0,weekStart:1,startView:1,minView:1,maxView:1,minViewMode:1,forceParse:!1,language:"zh-CN",initialDate:r,endDate:r}).val(r.getFullYear()+"-"+(r.getMonth()+1)).on("change",_)}catch(c){console.log(c)}var v=function(e,t,a,s){var i={};return e&&(i.type=e),t&&(i.time=t),a&&(i.beginDate=a),s&&(i.endDate=s),i},o=function(s,i,n,l){e("#zzu_invest_financ").val(s);var r=function(i){i&&("financ"==s?(t.createLine("zzu_main",i.keyList,i.valuelist,"融资总额",!1,""),e("#zzu_invest").hide()):(t.createLine("zzu_main",i.keyList,i.valuelist,"投资总额",!1,""),a.putTemplete("zzu_invest_tem",i,"zzu_invest"),e("#zzu_invest").show()))},_=v(s,i,n,l);a.ajaxUtil("graphical/reports.json",_,"GET",r)},w=function(s,i,n,l){e("#zzu_cash_withdrawal").val(s);var r=function(e){e&&("cash"==s?t.createLine("zzu_chartRecord",e.keyList,e.valuelist,"充值总额",!1,""):t.createLine("zzu_chartRecord",e.result.keyList,e.result.valuelist,"取现总额",!1,""))},_=v(s,i,n,l);a.ajaxUtil("graphical/reports.json",_,"GET",r)};e(".zzu-filter > span").click(function(){e(this).addClass("active").siblings().removeClass("active");var t,a=e(this).attr("data-value");0==a.indexOf("c")?(a=a.substr(1),t=e("#zzu_cash_withdrawal").val(),w(t,a)):(t=e("#zzu_invest_financ").val(),o(t,a))}),e(".zzu-tab > .zzu-item").on("click",function(){e(this).addClass("active").siblings().removeClass("active");var t=e(this).attr("data");if("invest"==t||"financ"==t){var a=e("#zzu_tabOne > span.active").attr("data-value");s.isNotNull(a)?o(t,a):o(t,null,e("#zzu_begin_time").val(),e("#zzu_end_time").val())}if("cash"==t||"withdrawal"==t){var a=e("#zzu_tabTwo > span.active").attr("data-value");s.isNotNull(a)?(a=a.substr(1),w(t,a)):w(t,null,e("#zzu_begin_time_table").val(),e("#zzu_end_time_table").val())}});var u=function(t){var s=t.zzu_USER_USER_NICKNAME;s&&(a.setItemSession("nikeName",s),e(".zzu-nike-name").html(s)),t.zzu_LOGIN_TIME&&e(".zzu-date").html(t.zzu_LOGIN_TIME),t.available_assets&&(a.setItemSession("available_assets",t.available_assets),e("#zzu_useable_amount").html(t.available_assets)),t.frozen_assets&&e("#zzu_freeze_amount").html(t.frozen_assets),t.total_assets&&e("#zzu_total_assets").html(t.total_assets),t.total_revenue&&e("#zzu_total_revenue").html(t.total_revenue),t.invested_assets&&e("#zzu_invested_assets").html(t.invested_assets),t.debt_assets&&e("#zzu_debt_assets").html(t.debt_assets)};a.ajaxUtil("account/userAccount.json",null,"GET",u),a.ajaxUtil("n/checkUser/isRegisterHf.json",null,"GET",function(t){"1111"==t.code?e("#zzu_rernittance").hide():e("#zzu_rernittance").show()}),e("#zzu_rernittance").on("click",function(){n.callUserRegister(null)}),o("invest","3",null,null),w("cash","3",null,null)});