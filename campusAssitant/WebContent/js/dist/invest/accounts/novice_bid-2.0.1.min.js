define(["jquery","common","util/validate","util/jquery.huifu"],function(e,n,t,i){var a,o,s,l=window.location.hash;l&&(s=l.substring(l.indexOf("#")+1,l.lastIndexOf("#")));var c=function(e){e&&(t.isNotNull(s)||(s=e.experienceLoan.LOAD_ID,r(),u()),a=e.experienceLoan.RATE,o=e.experienceLoan.PAYMENT_TIMES,n.putTemplete("zzu_detail_info_tem",e.experienceLoan,"zzu_detail_info"))};n.ajaxUtil("n/experience/loandetail.json",{loadId:s},"GET",c);var r=function(){n.ajaxUtil("n/loan/repayplan.json",{loadId:s},"GET",function(e){e&&n.putTemplete("zzu_striped_tem",e,"zzu_triped_info")})},u=function(){n.ajaxUtil("n/loan/loanhistory.json",{loadId:s},"GET",function(t){n.putTemplete("zzu_records_tem",t.loanHistoryList,"zzu_records_info"),e("#zzu_total_num").html(t.totalNum),e("#zzu_total_amt").html(t.totalAmt+".00")})};t.isNotNull(s)&&(r(),u());var _,d=function(){e("#zzu_experience_id").val()==e(this).attr("data")?(e(this).css("background-color","#ff665a"),e("#zzu_experience_id").val(""),e("#zzu_experience_amt").val("")):(e("#zzu_experience_id").val(e(this).attr("data")),e("#zzu_experience_amt").val(e(this).attr("data-amount")),e(this).siblings().css("background-color","#ff665a"),e(this).css("background-color","#f2a5a8"))},j=new Array,f=function(){var t=new Array;_>j.length&&(_=j.length),2>_&&(_=2);for(var i=_-2;_>i;i++)t.push(j[i]);t.length>0&&(n.putTemplete("zzu_cash_ticket",t,"zzu_cash_ticketBox"),e(".zzu-cash-ticketOne").on("click",d))};n.ajaxUtil("n/activity/allExperienceGold.json",{use_status:0},"GET",function(e){j=e,_=2,f()},function(e){}),e("#zzu_prev").on("click",function(){2>=_||(_--,f())}),e("#zzu_next").on("click",function(){_++,f()}),e("#zzu_btn_invest").on("click",function(l){n.ajaxUtil("n/checkUser/isLoginAndRegisterHf.json",null,"GET",function(l){if("1005"==l.code&&n.goUrl("login.html"),"1046"==l.code&&n.showMessage(l.message,"info",function(){i.callUserRegister(null)}),"1111"==l.code){if(!t.isNotNull(e("#zzu_experience_amt").val()))return void n.showMessage("无可用的体验金，或者未单击选中体验金");var c={ruleId:e("#zzu_experience_id").val(),rate:a,days:o,loanId:s,amount:e("#zzu_experience_amt").val()};n.ajaxUtil("n/activity/exprienceinvest.json",c,"POST",function(e){"1111"==e.code?n.goUrl("accounts/experience_money.html"):n.showMessage(e.message)})}})})});